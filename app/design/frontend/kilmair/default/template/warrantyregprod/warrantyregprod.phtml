<style type="text/css">
.ss_new {width:500px;height:auto;float:left;margin:0;padding:0;list-style:none;}
.ss_new ul {width:493px;height:auto;float:left;margin:0;padding:0;list-style:none;}
.ss_new li {width:280px;height:auto;float:left;margin:0;padding:2px;list-style:none;}
#ss_new_innerli1 {width:220px;height:auto;float:left;margin:0;padding:2px;list-style:none; text-align: right; font-weight: bold;}
#ss_new_innerli2 {width:265px;height:auto;float:left;margin:0;padding:2px;list-style:none;}
#ss_new_innerli3 {width:15px;height:auto;float:left;margin:0 0 0 -100px;padding:2px;list-style:none;}
#msg_0,#msg_1,#msg_2,#msg_3,#msg_4,#msg_5,#msg_6,#msg_7,#msg_8,#msg_9,#msg_10,#msg1_0,#msg1_1,#msg1_2,#msg1_3,#msg1_4,#msg1_5,#msg1_6,#msg1_7,#msg1_8,#msg1_9,#msg1_10 {color:#F00;}
.button-wattantyregrop {background: none repeat scroll 0 0 #0D7F02;border: 1px solid #076300;color: #FFFFFF;cursor: pointer;height: 25px;padding: 0 2px;width: auto;}
select {width:156px;}

.ctrDropDown{
    width:145px;
    font-size:11px;
}
.ctrDropDownClick{
    font-size:11px;

    width:300px;


}
.plainDropDown{
    width:145px;
    font-size:11px;
}
</style>


<link href="/skin/frontend/kilmair/default/SpryAssets/SpryValidationTextField.css" rel="stylesheet" type="text/css" />
<script src="/skin/frontend/kilmair/default/SpryAssets/SpryValidationTextField.js" type="text/javascript"></script>
<script type="text/javascript">
function reset_lookup()
{   
    document.location.href = '<?php echo $this->getUrl('warrantyregprod/index/post/'); ?>?hidden_reset_flg=set';
}
function inArray(needle, haystack) {
                        var length = haystack.length;
                        for(var i = 0; i < length; i++) {
                            if(haystack[i] == needle) return 1;
                        }
                        return 0;
                    }
function SrNo_handlerFunction(){
// Making Ajax Request
        var request = new Ajax.Request(
            //Defining Ajax Request URL, We are calling custom Controller Ns_Mylogin_AccountController Class (Defined Below)
            '<?php echo $this->getUrl("warrantyregprod/index/ajax/"); ?>',
            {
                method: 'post',
                onComplete: function(transport){ // Defining Complete Callback Function
 
                    // Getting Ajax Response Text Which is JSON Object
                    var jsonResponse=transport.responseText;
                    //alert(jsonResponse);
                    //Checking JSON Objects property and performing related action
                    // You will understand the response Text format after going through the controller description (Below)
                    //return false;
                    
                    //alert(response_arr);
                    var response_arr = jsonResponse.split('__#__');
                    alert(response_arr.length+' '+response_arr+' '+inArray('indr_userialno',response_arr)+' '+inArray('serialno',response_arr));
                    if(inArray('serialno',response_arr) == 0 && inArray('indr_userialno',response_arr) == 0)
                    {
                        if(document.getElementById('serialno_error_msg_id').style.display == 'block')
                        {
                            document.getElementById('serialno_error_msg_id').style.display = 'none';
                        }
                        
                        if(document.getElementById('indr_userialno_error_msg_id').style.display == 'block')
                        {
                            document.getElementById('indr_userialno_error_msg_id').style.display = 'none';
                        }                        
                            return true;                            
                    }
                    else
                    {
                            if(inArray('serialno',response_arr) == 1)
                            {
                                document.getElementById('serialno_error_msg_id').style.display = 'block';    
                            }
                            else
                            {                                
                                document.getElementById('serialno_error_msg_id').style.display = 'none';
                            }
                            
                            if(inArray('indr_userialno',response_arr) == 1)
                            {
                                document.getElementById('indr_userialno_error_msg_id').style.display = 'block';    
                            }
                            else
                            {                               
                                document.getElementById('indr_userialno_error_msg_id').style.display = 'none';     
                            }                            
                            return false;                                                
                    }        
                            
                },
                parameters: Form.serialize($("warranty_prod_reg_Form"))    // Seriallizing the form input values
                //parameters: val
            }
        );
     // }  
}
//fill category drop down from session value if data is available
function htmlDecode(input){
  var e = document.createElement('div');
  e.innerHTML = input;
  return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
}

function checkFormUsingAjax()
{
    
    var request1 = new Ajax.Request(
        '<?php echo $this->getUrl("warrantyregprod/index/ajaxvalidation/"); ?>',
        {
            method: 'post',
            onComplete: function(transport){
                var ErrMsg = '';
                ErrMsg=transport.responseText;
                //Matching Unit Model Number
                //document.getElementById('indoor_prodcode_').innerHTML=jsonResponse;
                
                if(ErrMsg == '')
                {
                    //submit form
                    document.warranty_prod_reg_Form.submit();
                }
                else
                {
					//alert("its work");
                    //print error message
                    
                    var htmlText = htmlDecode(ErrMsg);
                    var err=htmlText.split('^');
                    var preErrMsg = 'Followings are required. Please, input the data.\n';
                    var newerr='';
                    for(i=0;i<err.length;i++)
                    {
                            newerr = newerr + '\n' +err[i];
                    }
				
				
                    alert(preErrMsg + newerr);
				
                    document.getElementById('reg').disabled=false;
                }
            },
            parameters: Form.serialize($("warranty_prod_reg_Form"))
        }
    );
   
}
//fill serial number form.
function fillProductcode(catid)
{
	var newcatID = document.getElementById('product_type_cat_'+catid).value;
    var request1 = new Ajax.Request(
        '<?php echo $this->getUrl("warrantyregprod/index/ajaxcategory/"); ?>?cat_id='+newcatID,
        {
            method: 'post',
            onComplete: function(transport){
                var jsonResponse=transport.responseText;
                //Model Number
                //document.getElementById('prodcode_'+catid).innerHTML=jsonResponse;
				document.getElementById('msg_'+catid).style.display='none';
				document.getElementById('msg1_'+catid).style.display='none';
				var objselect = document.getElementById('prodcode_'+catid);
				objselect.options.length = 0;
				var rawdata = jsonResponse.split("|");
				for(var i=0;i<rawdata.length;i++)
				{
					var finaldata = rawdata[i].split("=");
					objselect.options.add(new Option(finaldata[1],finaldata[0]));
				}
				//remove matching unit model numbers
				var objselect1 = document.getElementById('indoor_prodcode_'+catid);
				objselect1.options.length = 0;
				objselect1.options.add(new Option('-Select Model-',''));
            },
            parameters: Form.serialize($("warranty_prod_reg_Form"))
        }
    );
}
function fillIndoorUnitModelNumber(elementid)
{
	var productcode= document.getElementById('indoor_prodcode_'+elementid).options[document.getElementById('indoor_prodcode_'+elementid).selectedIndex].text;
	var mymsg ='';
	if (productcode.substr(productcode.length-2,productcode.length).toLowerCase()== '-i')
	{
		mymsg='<b>-I : Indoor Unit</b>';
	}
	if (productcode.substr(productcode.length-2,productcode.length).toLowerCase()== '-o')
	{
		mymsg='<b style="color:blue;">-O : Outdoor Unit</b>';
	}
	document.getElementById('msg1_'+elementid).style.display='inline';
	document.getElementById('msg1_'+elementid).innerHTML=mymsg;
}

function fillMatchngUnitModelNumber(elementid)
{
	
	var curproductcode = document.getElementById('prodcode_'+elementid).value;
	//alert(curproductcode);
    var request1 = new Ajax.Request(
        '<?php echo $this->getUrl("warrantyregprod/index/matchingunitmodelnumber/"); ?>?ele_id='+elementid+'&prdcode='+curproductcode,
        {
            method: 'post',
            onComplete: function(transport){
                var jsonResponse=transport.responseText;
                
                //Matching Unit Model Number
                //document.getElementById('indoor_prodcode_'+elementid).innerHTML=jsonResponse;
				
				var objselect = document.getElementById('indoor_prodcode_'+elementid);
				objselect.options.length = 0;
				var rawdata = jsonResponse.split("|");
				for(var i=0;i<rawdata.length;i++)
				{
					var finaldata = rawdata[i].split("=");
					objselect.options.add(new Option(finaldata[1],finaldata[0]));
				}
				
            },
            parameters: Form.serialize($("warranty_prod_reg_Form"))
        }
    );
	//var productcode= document.getElementById('prodcode_'+elementid).options[document.getElementById('prodcode_'+elementid).selectedIndex].label;
	var productcode= document.getElementById('prodcode_'+elementid).options[document.getElementById('prodcode_'+elementid).selectedIndex].text;
	var mymsg ='';
	if (productcode.substr(productcode.length-2,productcode.length).toLowerCase()== '-i')
	{
		mymsg='<b>-I : Indoor Unit</b>';
	}
	if (productcode.substr(productcode.length-2,productcode.length).toLowerCase()== '-o')
	{
		mymsg='<b style="color:blue;">-O : Outdoor Unit</b>';
	}
	document.getElementById('msg_'+elementid).style.display = 'inline';
	document.getElementById('msg_'+elementid).innerHTML=mymsg;
	document.getElementById('msg1_'+elementid).style.display = 'none';
	//<span id="msg_0"></span>
}

function checkSerialNo(elementNo)
{
	var SrNo = document.getElementById('serialno_' + elementNo).value;
	var PrdCode = document.getElementById('prodcode_' + elementNo).value;
	if(SrNo != '')
	{
		return;	
	}
	
	if(SrNo != '' && PrdCode == '')
	{
		alert('Please Select Model Number.');
		return;	
	}
	
	//alert(SrNo + PrdCode);
	var request1 = new Ajax.Request(
        '<?php echo $this->getUrl("warrantyregprod/index/checkserialnumber/"); ?>?srno='+SrNo+'&prodcode='+PrdCode,
        {
            method: 'post',
            onComplete: function(transport){
                var jsonResponse=transport.responseText;
				//alert(jsonResponse);
                if(jsonResponse == true)
				{
                	//document.getElementById('reg').disabled=true;
				}
				else
				{
					alert('Incorrect Serial Number');	
					//document.getElementById('reg').disabled=false;
				}
            },
            parameters: Form.serialize($("warranty_prod_reg_Form"))
        }
    );
}
/* ****** 2. Product Information :: Add/Remove elements Dynamically... ***** */

var Global_prodCode_arr = new Array();
var Global_prodName_arr = new Array();
var Global_categoryId_arr = new Array();
var Global_categoryName_arr = new Array();

Global_categoryId_arr.push('3'); 
Global_categoryName_arr.push('Ductless Split Systems');
Global_categoryId_arr.push('87'); 
Global_categoryName_arr.push('Package Terminal Systems (PTAC & PTHP)');
Global_categoryId_arr.push('94'); 
Global_categoryName_arr.push('Heat & Energy Recovery Units');
Global_categoryId_arr.push('96'); 
Global_categoryName_arr.push('Dehumidification Units');
Global_categoryId_arr.push('97'); 
Global_categoryName_arr.push('Air Cleaners');
Global_categoryId_arr.push('8'); 
Global_categoryName_arr.push('Central Heating & Cooling Split Systems');
Global_categoryId_arr.push('39'); 
Global_categoryName_arr.push('Package Units');
Global_categoryId_arr.push('115'); 
Global_categoryName_arr.push('Commercial Units & VRF Systems');
Global_categoryId_arr.push('16'); 
Global_categoryName_arr.push('Tankless Water Heaters');
Global_categoryId_arr.push('18'); 
Global_categoryName_arr.push('Boilers &amp; Heaters');
Global_categoryId_arr.push('20'); 
Global_categoryName_arr.push('Air Curtains');

<?php
   /* $categories = Mage::getModel('catalog/category')->getCollection()
             ->addAttributeToSelect('name','parent_id')
             ->setLoadProductCount(true)
             ->addAttributeToFilter('is_active',array('eq'=>true))
            ->setOrder('name', 'ASC')
             ->load();
     foreach ($categories as $category)
     {    
         if($category['name'] != 'Default Category')
         {
           $category1 = Mage::getModel('catalog/category')->load($category['parent_id']);   
                         
            if($category1->getName() != 'Default Category')
            {   
            ?>
                            Global_categoryId_arr.push('<?php echo $category->getId(); ?>'); 
                            Global_categoryName_arr.push('<?php echo $category['name'].'('.$category1->getName().')'; ?>');
            <?php
            }
            else
            {
                     ?>
                            Global_categoryId_arr.push('<?php echo $category->getId(); ?>'); 
                            Global_categoryName_arr.push('<?php echo $category['name']; ?>');
                     <?php
            }
         }
     }*/
	?>
function removeThisBlock() 
{
    this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);
    if(Global_addField_cnt > 1)
    {
        Global_addField_cnt--;    
    }
    //document.getElementById('hidden_product_info_cnt').value = Global_addField_cnt;
}

var Global_addField_cnt = 1;
var Global_skin_images_path = '<?php echo $this->getSkinUrl('images') ?>';
//Add more fields dynamically.
function addField(area,field,limit) {
    if(!document.getElementById) return; //Prevent older browsers from getting any further.
    
    var field_area = document.getElementById(area);
    
    if(Global_addField_cnt >= limit && limit > 0) return;
    
    var existCheckObj = document.getElementById('prodcode_'+Global_addField_cnt);
    //alert(existCheckObj+' - Start'+Global_addField_cnt);
    while(existCheckObj != null)
    {
        Global_addField_cnt++;
        var existCheckObj = document.getElementById('prodcode_'+Global_addField_cnt);
        //alert(existCheckObj+' - In'+Global_addField_cnt);
    }
    
    //alert(existCheckObj+' - Out'+Global_addField_cnt);
    
    count = Global_addField_cnt;    
    
    if(document.createElement) { //W3C Dom method.

        var ul = document.createElement("ul");
        ul.className = 'ss_new';
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli1';
        li.innerHTML = '<hr />';
        ul.appendChild(li);
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        li.innerHTML = '<hr />';
        ul.appendChild(li);
        
        var li = document.createElement("li");
        li.innerHTML = 'Application Type:'; 
        li.id = 'ss_new_innerli1';
        ul.appendChild(li);
                
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var input = document.createElement("input");
        input.id = 'residential_'+count;
        input.name = 'prodtype_'+count;
        input.type = "radio"; //Type of field - can be any valid input type like text,file,checkbox etc.
        input.value = "residential";
        li.appendChild(input);                
        ul.appendChild(li);
        
        var input = document.createElement("label");
        input.setAttribute("for",'residential_'+count);
        input.innerHTML = 'Residential&nbsp;&nbsp;';
        li.appendChild(input);            
        
        var input = document.createElement("input");
        input.id = 'commercial_'+count;
        input.name = 'prodtype_'+count;
        input.type = "radio"; //Type of field - can be any valid input type like text,file,checkbox etc.
        input.value = "commercial";        
        li.appendChild(input);                
        ul.appendChild(li);
        
        var input = document.createElement("label");
        input.setAttribute("for",'commercial_'+count);
        input.innerHTML = 'Commercial';
        li.appendChild(input);        

        //Global_categoryId_arr
        var li = document.createElement("li");
        li.id = 'ss_new_innerli1';
        li.innerHTML = 'Product Type:';            
        ul.appendChild(li);
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var input = document.createElement("select");
        input.id = 'product_type_cat_'+count;
        input.name = 'product_type_cat_'+count;
        input.className = 'input-text validate-select';
        input.setAttribute('onchange', 'fillProductcode('+count+')');
        //input.type = "select"; //Type of field - can be any valid input type like text,file,checkbox etc.
        var option = document.createElement('option');
        option.value = '';
        option.appendChild(document.createTextNode('-Select Category-'));
        input.appendChild(option);
        for(var i=0; i<Global_categoryId_arr.length; i++)
        {
            var option = document.createElement('option');
            option.value = Global_categoryId_arr[i];
            option.appendChild(document.createTextNode(Global_categoryName_arr[i]));
            input.appendChild(option);
        }
        //option.appendChild(document.createTextNode(Global_prodCode_arr[i]));
        li.appendChild(input);
        ul.appendChild(li);
        //
        var li = document.createElement("li");
        li.id = 'ss_new_innerli1';
        li.innerHTML = 'Model Number:';            
        ul.appendChild(li);
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var input = document.createElement("select");
        input.id = 'prodcode_'+count;
        input.name = 'prodcode_'+count;
        input.className = 'input-text validate-select';
        input.setAttribute('onchange', 'fillMatchngUnitModelNumber('+count+')');
        //input.type = "select"; //Type of field - can be any valid input type like text,file,checkbox etc.
        var option = document.createElement('option');
        option.value = '';
        option.appendChild(document.createTextNode('- Select Product Code -'));
        input.appendChild(option);
        for(var i=0; i<Global_prodCode_arr.length; i++)
        {
            var option = document.createElement('option');
            option.value = Global_prodCode_arr[i];
            option.appendChild(document.createTextNode(Global_prodName_arr[i]));
            input.appendChild(option);
        }
        //option.appendChild(document.createTextNode(Global_prodCode_arr[i]));
        li.appendChild(input);
		var span = document.createElement("span");
        span.id = 'msg_'+count;
		li.appendChild(span);
        ul.appendChild(li);
		//for indoor outdoor message
        
        		
        var li = document.createElement("li");
        li.id = 'ss_new_innerli1';
        li.innerHTML = 'Serial Number:';            
        ul.appendChild(li);

        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var input = document.createElement("input");
        input.id = 'serialno_'+count;
        input.name = 'serialno_'+count;
        input.className = 'input-text required-entry validate-serial-number';
		input.setAttribute('onblur', 'checkSerialNo('+count+')');
      
        input.type = "text"; //Type of field - can be any valid input type like text,file,checkbox etc.
        li.appendChild(input);                
        ul.appendChild(li);
        
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli1';
        li.innerHTML = 'Matching Unit Model Number:';            
        ul.appendChild(li);        
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var input = document.createElement("select");
        input.id = 'indoor_prodcode_'+count;
        input.name = 'indoor_prodcode_'+count;  
		input.setAttribute('onchange', 'fillIndoorUnitModelNumber('+count+')');      
        //input.type = "select"; //Type of field - can be any valid input type like text,file,checkbox etc.        
        var option = document.createElement('option');
        option.value = '';
        option.appendChild(document.createTextNode('-Select Model-'));
        input.appendChild(option);
        for(var i=0; i<Global_prodCode_arr.length; i++)
        {
            var option = document.createElement('option');
            option.value = Global_prodCode_arr[i];
            option.appendChild(document.createTextNode(Global_prodCode_arr[i]));
            input.appendChild(option);
        }
        //option.appendChild(document.createTextNode(Global_prodCode_arr[i]));
        li.appendChild(input);
		var span = document.createElement("span");
        span.id = 'msg1_'+count;
		li.appendChild(span);
        ul.appendChild(li);
                
        var li = document.createElement("li");
        li.id = 'ss_new_innerli1';
        li.innerHTML = 'Matching Unit Serial Number:';            
        ul.appendChild(li);

        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var input = document.createElement("input");
        input.id = 'indr_userialno_'+count;
        input.name = 'indr_userialno_'+count;
        input.type = "text"; //Type of field - can be any valid input type like text,file,checkbox etc.
        li.appendChild(input);                
        ul.appendChild(li);
        
        
        var li = document.createElement("li");
        li.id = 'ss_new_innerli1';
        li.innerHTML = '&nbsp;';
        ul.appendChild(li);
        
        /*var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var input = document.createElement("a");
        input.onclick = removeThisBlock;
        input.style.cursor = 'pointer';
        input.value = 'Cancel';
        input.innerHTML = 'Cancel';
        li.appendChild(input);                
        ul.appendChild(li);*/

        var li = document.createElement("li");
        li.id = 'ss_new_innerli2';
        var img = document.createElement("img");
        img.src = Global_skin_images_path+'/cancel-button-md.png';
        img.width = '70';
        img.height = '25';
        var input = document.createElement("a");
        input.onclick = removeThisBlock;
        input.style.cursor = 'pointer';
        //input.value = 'Cancel';
        //input.innerHTML = 'Cancel';
        input.appendChild(img);
        li.appendChild(input);                
        ul.appendChild(li);        
                
        field_area.appendChild(ul);
        //document.getElementById('hidden_product_info_cnt').value = Global_addField_cnt;
        
                
        
    } else { //Older Method
        field_area.innerHTML += "<li><input name='"+(field+count)+"' id='"+(field+count)+"' type='text' /></li>";
    }
}
/* ****** 2. Product Information :: Add/Remove elements Dynamically... ***** */
</script>
<br />
<div class="page-title"><h1><?php echo $this->__('Product Registration') ?></h1></div>
<br />
<style type="text/css">
.validation-failed
{
    border-color: #EB340A !important;
    background-color: #FAEBE7 !important; 
}
.validation-advice {
    background-color: transparent;    
    clear: both;
    float:left;
    color: #EB340A;
    font-size: 10px;
    /*font-weight: bold;*/
    line-height: 13px;
    margin: 3px 0px 0px 0px;
    min-height: 13px;
    padding: 0 0 0 15px;

}
.warranty_block_class
{ 
    background-color: #CCC; 
    padding: 2px; 
    border: 1px solid #000; 
    clear: both;       
}
.mandatory_star_fields
{
    color: red;
     position:absolute;
}
table th
{
    text-align: right !important;
} 
</style>

<?php   
 /*
    $category_model = Mage::getModel('catalog/category'); 
    $_category = $category_model->load(36);      
    $all_child_categories = $category_model->getResource()->getAllChildren($_category); 

foreach($all_child_categories as $newcategory)
{
     $catagory_model1 = Mage::getModel('catalog/category')->load($newcategory); 
     $collection = Mage::getResourceModel('catalog/product_collection');
     $collection->addCategoryFilter($catagory_model1);
     $collection->addAttributeToFilter('status',1);
     $collection->addAttributeToSelect(array('name','entity_id')); 
     $collection->addStoreFilter();
	 foreach ($collection as $_product){
        echo '<option value="'. $_product['entity_id'].'" >'.$_product['name'].'</option>';
        }
}
*/

$attributes = Mage::getResourceModel('catalog/product_attribute_collection')->getItems();

foreach ($attributes as $attribute){
    echo "atributecode".$attribute->getAttributecode();
    echo '<br>';
    echo "atributelabel:".$attribute->getFrontendLabel();
    echo '<br>';
    echo"-------------------";
    echo '<br>';
}

/*$_item = $this->getProduct()->getId();
$_resource = $this->getProduct()->getResource();
$optionValue = $_resource->getAttributeRawValue($_item, 'producttype', Mage::app()->getStore());
echo $optionValue;*/


$attributeId = Mage::getResourceModel('eav/entity_attribute')->getIdByCode('catalog_product','producttype');
$attribute = Mage::getModel('catalog/resource_eav_attribute')->load($attributeId);
$attributeOptions = $attribute ->getSource()->getAllOptions();


foreach($attributeOptions as $at):
    echo $at['value'];
    echo "--------";
    echo $at['label'];
    ?>
    <option value="<?php echo $v; ?>"<?php if($_SESSION['warranty_reg_prod_data_reserve']['State'] == $v) {?> selected="selected"<?php }?>><?php echo $v; ?></option>
<?php
endforeach;

?>


<div>Fields with (<span style="color:#F00;">*</span>) are required</div><br />
<form action="<?php echo $this->getUrl('warrantyregprod/index/post/'); ?>" name="warranty_prod_reg_Form" id="warranty_prod_reg_Form" method="post" >
<input type="hidden" value="10" name="hidden_product_info_cnt" id="hidden_product_info_cnt" />
<div class="warranty_block_class"><strong>1. - Owner's Information</strong></div><br />
<table width="100%" border="0" cellspacing="3" cellpadding="1">
  <tr>
    <th width="23%" align="right" valign="top"><label for="fname" class="required">Firstname:</label></th>
    <td width="16%"><input type="text" name="fname" class="input-text required-entry" id="fname" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['fname']; ?>" /></td>
    <td width="61%" align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="lname" class="required">Lastname:</label></th>
    <td><input type="text" name="lname" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['lname']; ?>" id="lname" /></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="addr1" class="required">Address1:</label></th>
    <td><input type="text" name="addr1" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['addr1']; ?>" id="addr1" /></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top">Apt/Unit#:</th>
    <td><input type="text" name="apt" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['apt']; ?>" id="apt"  /></td>
    <td align="left" valign="top">&nbsp;</td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="email" class="required">Email:</label></th>
    <td><input name="email" id="email" class="input-text required-entry validate-email" type="text" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['email']; ?>" /></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="city" class="required">City:</label></th>
    <td><input type="text" name="city" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['city']; ?>" id="city" /></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top">State:</th>
    <td>
    <?php
    $_state_arr = array("Alabama"=>"Alabama","Alaska"=>"Alaska","Arizona"=>"Arizona","Arkansas"=>"Arkansas","California"=>"California","Colorado"=>"Colorado","Connecticut"=>"Connecticut","Delaware"=>"Delaware","Georgia"=>"Georgia","Kentucky"=>"Kentucky","Hawaii"=>"Hawaii","Idaho"=>"Idaho","Illinois"=>"Illinois","Indiana"=>"Indiana","Iowa"=>"Iowa","Kansas"=>"Kansas","Kentucky"=>"Kentucky","Louisiana"=>"Louisiana","Maine"=>"Maine","Maryland"=>"Maryland","Massachusets"=>"Massachusets","Michigan"=>"Michigan","Minnesota"=>"Minnesota","Mississippi"=>"Mississippi","Missouri"=>"Missouri","Montana"=>"Montana","Nebraska"=>"Nebraska","Nevada"=>"Nevada","New hampshire"=>"New Hampshire","New jersey"=>"New Jersey","New mexico"=>"New Mexico","New york"=>"New York","North carolina"=>"North Carolina","North dakota"=>"North Dakota","Ohio"=>"Ohio","Oklahoma"=>"Oklahoma","Oregon"=>"Oregon","Pennsylvania"=>"Pennsylvania","Rhode island"=>"Rhode Island","South carolina"=>"South Carolina","South dakota"=>"South Dakota","Tennessee"=>"Tennessee","Texas"=>"Texas","Utah"=>"Utah","Vermont"=>"Vermont","Virginia"=>"Virginia","Washington"=>"Washington","West virginia"=>"West Virginia","Wisconsin"=>"Wisconsin","Florida"=>"Florida");    
    asort($_state_arr);
    ?>
    <select name="State" id="State">
    <option value="">- Select State -</option>    
    <?php
    foreach($_state_arr as $v):
    ?>
    <option value="<?php echo $v; ?>"<?php if($_SESSION['warranty_reg_prod_data_reserve']['State'] == $v) {?> selected="selected"<?php }?>><?php echo $v; ?></option>
    <?php
    endforeach;
    ?>
    </select>
    </td>
    <td align="left" valign="top">&nbsp;</td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="zipcode" class="required">Zip Code:</label></th>
    <td><span id="sprytextfield1">
      <input type="text" name="zipcode" class="input-text required-entry validate-zip" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['zipcode']; ?>" id="zipcode" />
      <span class="textfieldRequiredMsg">&nbsp;&nbsp; A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid zipcode.</span></span></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="phno" class="required">Phone:</label></th>
    <td><span id="sprytextfield2">
      <input type="text" name="phno" class="input-text required-entry validate-phoneStrict" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['phno']; ?>" id="phno" />
      <span class="textfieldRequiredMsg">&nbsp;&nbsp; A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid phone number.</span></span></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top">&nbsp;</th>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>

<div class="warranty_block_class"><strong>2. - Product Information</strong></div><br />

<ul id="product_information_area" class="ss_new">
    <li id="ss_new_innerli1">Application Type:</li>
    <li id="ss_new_innerli2"><input type="radio" name="prodtype_0" id="aptres" value="residential"<?php //if($_SESSION['warranty_reg_prod_data_reserve']['prodtype'] == 'residential'){ echo 'checked'; }?> checked="checked" />Residential &nbsp;&nbsp;<input type="radio" name="prodtype_0" id="aptcom" value="commercial"<?php //if($_SESSION['warranty_reg_prod_data_reserve']['prodtype'] == 'commercial'){ echo 'checked'; }?> />Commercial</li>
    
    <!-- Add Product Type -->
    
    <li id="ss_new_innerli3">&nbsp;</li>
    
  
    <li id="ss_new_innerli1"><label for="prodcode_0" class="required">Product Type:</label></li>
    <li id="ss_new_innerli2">
       
        <select name="product_type_cat_0"  id="product_type_cat_0" style="width:156px" onchange="fillProductcode(0);">
           <!-- <option value="" selected="selected">-Select Category-</option>
            <option value="3">Ductless Split Systems</option>
            <option value="87">Package Terminal Systems (PTAC & PTHP)</option>
            <option value="94">Heat & Energy Recovery Units</option>
            <option value="96">Dehumidification Units</option>
            <option value="97">Air Cleaners</option>
            <option value="8">Central Heating & Cooling Split Systems</option>
            <option value="39">Package Units</option>
            
            <option value="115">Commercial Units & VRF Systems</option>
            <option value="16">Tankless Water Heaters</option>
            <option value="18">Boilers &amp; Heaters</option>
            <option value="20">Air Curtains</option>-->
            <!-- blow code is for to get all category  dynamic , above code static 4-7-2012-->
            
    <?php

    $collection = Mage::getModel('catalog/product')->getCollection();
    $collection->addAttributeToSelect('producttype');
    //$collection->addAttributeToSelect('orig_price');

    foreach ($collection as $product) {
        //var_dump($product);
        var_dump($product->getData());
    }

    //----------------------------------------------------

    /*$categories = Mage::getModel('catalog/category')->getCollection()
             ->addAttributeToSelect('name','parent_id')
             ->setLoadProductCount(true)
             ->addAttributeToFilter('is_active',array('eq'=>true))
            ->setOrder('name', 'ASC')
             ->load();
     foreach ($categories as $category)
     {    
         if($category['name'] != 'Default Category')
         {
           $category1 = Mage::getModel('catalog/category')->load($category['parent_id']);   
                         
            if($category1->getName() != 'Default Category')
            {
                 echo '<option value="'.$category->getId().'" ';
             if($_SESSION['warranty_reg_prod_data_reserve']['product_type_cat_0'] == $category->getId())  {echo 'selected="selected"'; }
                     echo '>'.$category['name'].'('.$category1->getName().')</option>';
                         
            }
            else
            {
                echo '<option value="'.$category->getId().'" ';
                if($_SESSION['warranty_reg_prod_data_reserve']['product_type_cat_0'] == $category->getId())  {echo 'selected="selected"'; }
                     echo '>'.$category['name'].'</option>';
                     
            }
             
         }
     }*/
	?>
        </select>
        
    </li> 
    <!-- Add Product Type -->
    <li id="ss_new_innerli3">&nbsp;</li>
 
    <li id="ss_new_innerli1"><label for="prodcode_0" class="required">Model Number:</label></li>
    <li id="ss_new_innerli2">
    <select name="prodcode_0" class="input-text validate-select" id="prodcode_0" style="width:156px" onchange="fillMatchngUnitModelNumber(0);" >
        <option value="" selected>-Select Model-</option>
    </select><span id="msg_0"></span>
    </li>    
    <li id="ss_new_innerli3">&nbsp;</li>  

    <li id="ss_new_innerli1"><label for="serialno_0" class="required">Serial Number:</label></li>
    <li id="ss_new_innerli2">
    
    <input type="text" name="serialno_0" class="input-text required-entry validate-serial-number" style="width:150px" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['serialno_0']; ?>" id="serialno_0"  onblur="checkSerialNo(0);"/>
    
    <div id="serialno_error_msg_id" class="validation-advice" style="display: none;">Serial Number already exists.</div>
    </li>
    <li id="ss_new_innerli3">&nbsp;<span class="mandatory_star_fields">*</span></li>
  
  <li id="ss_new_innerli1"><label for="indoor_prodcode_0" class="required">Matching Unit Model Number:</label></li>
    <li id="ss_new_innerli2">
      
        <select name="indoor_prodcode_0" class="input-text validate-select" id="indoor_prodcode_0" style="width:156px" onchange="fillIndoorUnitModelNumber(0);" >
    <option value="" selected>-Select Model-</option>
    
    </select><span id="msg1_0"></span>
    
    </li>    
    <li id="ss_new_innerli3">&nbsp;</li>  
  
    <li id="ss_new_innerli1"><label for="indr_userialno_0" class="required">Matching Unit Serial Number:</label></li>
    <li id="ss_new_innerli2"><input type="text" name="indr_userialno_0" style="width:150px" class="input-text" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['indr_userialno_0']; ?>" id="indr_userialno_0" />
    <div id="indr_userialno_error_msg_id" class="validation-advice" style="display: none;">Matching Unit Serial Number already exists.</div>
    </li>
    <li id="ss_new_innerli3">&nbsp;</li>
</ul>

<ul class="ss_new">
    <li id="ss_new_innerli1"><hr /></li>
    <li id="ss_new_innerli2"><hr /></li>
    <li id="ss_new_innerli3">&nbsp;</li>

    <li id="ss_new_innerli1"><label for="invoiceno" class="required">Dealer Invoice Number:</label></li>
    <li id="ss_new_innerli2"><span id="sprytextfield7">
      <input type="text" name="invoiceno" class="input-text required-entry validate-number" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['invoiceno']; ?>" id="invoiceno" /><span class="textfieldRequiredMsg">&nbsp;&nbsp;<br/>&nbsp;A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid number.</span></span></li>
    <li id="ss_new_innerli3">&nbsp;<span class="mandatory_star_fields">*</span></li>
  
  
    <li id="ss_new_innerli1"><label for="purchasedon" class="required">Date Purchased:</label></li>
    <li id="ss_new_innerli2"><input type="text" name="purchasedon" class="input-text required-entry validate-date" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['purchasedon']; ?>" id="purchasedon" /></li>
    <li id="ss_new_innerli3">&nbsp;<span class="mandatory_star_fields">*</span></li>
  
    <li id="ss_new_innerli1"><label for="installedon" class="required">Date Installed:</label></li>
    <li id="ss_new_innerli2"><input type="text" name="installedon" class="input-text required-entry validate-date" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['installedon']; ?>" id="installedon" /></li>
    <li id="ss_new_innerli3">&nbsp;<span class="mandatory_star_fields">*</span></li>
  
    <li id="ss_new_innerli1"><label for="dealername" class="required">Dealer Name:</label></li>
    <li id="ss_new_innerli2"><input type="text" name="dealername" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['dealername']; ?>" id="dealername" /></li>
    <li id="ss_new_innerli3">&nbsp;<span class="mandatory_star_fields">*</span></li>
  
    <li id="ss_new_innerli1">&nbsp;</li>
    <li id="ss_new_innerli2">&nbsp;</li>
    <li id="ss_new_innerli3">&nbsp;</li>    
  
</ul>
<input type="button" value="Add New" class="button-wattantyregrop" onclick="addField('product_information_area','product_information_',10);" />
  


<div class="warranty_block_class"><strong>3. - Installer Information</strong></div><br />  
<table width="100%" border="0" cellspacing="3" cellpadding="1">    
  <tr>
    <th align="right" valign="top"><label for="inst_dealername" class="required">Installer Dealer Name:</label></th>
    <td width="16%"><input type="text" name="inst_dealername" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['inst_dealername']; ?>" id="inst_dealername" /></td>
    <td width="61%" align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="inst_licenseno" class="required">Installer License Number:</label></th>
    <td><span id="sprytextfield3">
      <input type="text" name="inst_licenseno" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['inst_licenseno']; ?>" id="inst_licenseno" />
      <span class="textfieldRequiredMsg">&nbsp;&nbsp; A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid License number.</span></span></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="inst_dealer_street" class="required">Installer Dealer Street Address:</label></th>
    <td><input type="text" name="inst_dealer_street" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['inst_dealer_street']; ?>" id="inst_dealer_street" /></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="inst_dealer_ph" class="required">Installer Phone Number:</label></th>
    <td><span id="sprytextfield4">
      <input type="text" name="inst_dealer_ph" class="input-text required-entry validate-phoneStrict" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['inst_dealer_ph']; ?>" id="inst_dealer_ph" />
      <span class="textfieldRequiredMsg">&nbsp;&nbsp; A value is required.</span></span></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="dealer_phno" class="required">Dealer Phone Number:</label></th>
    <td><span id="sprytextfield5">
      <input type="text" name="dealer_phno" class="input-text validate-phoneStrict" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['dealer_phno']; ?>" id="dealer_phno" />
      <span class="textfieldRequiredMsg">&nbsp;&nbsp; A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid phone number.</span></span></td>
    <td align="left" valign="top">&nbsp;</td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="inst_city" class="required">City:</label></th>
    <td><input type="text" name="inst_city" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['inst_city']; ?>" id="inst_city" /></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="inst_state" class="required">State:</label></th>
    <td><input type="text" name="inst_state" class="input-text required-entry" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['inst_state']; ?>" id="inst_state" /></td>
    <td align="left" valign="top">&nbsp;<span class="mandatory_star_fields">*</span></td>
  </tr>
  <tr>
    <th align="right" valign="top"><label for="inst_zip" class="required">Zip:</label></th>
    <td><span id="sprytextfield6">
      <input type="text" name="inst_zip" class="input-text validate-zip" value="<?php echo $_SESSION['warranty_reg_prod_data_reserve']['inst_zip']; ?>" id="inst_zip" />
      <span class="textfieldRequiredMsg">&nbsp;&nbsp; A value is required.</span></span></td>
    <td align="left" valign="top">&nbsp;</td>
  </tr>  
  <tr>
    <th align="right" valign="top">&nbsp;</th>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  
  
</table>
</form>
<table style="width:565px;margin: 0 auto;">
    </tr>
    <tr>
    <th align="right" valign="top">&nbsp;</th>
    <td colspan="2"><input type="submit" value="  Register  " id="reg" name="" class="button-wattantyregrop" onclick="this.disabled=true;checkFormUsingAjax();" />&nbsp;<input type="reset" name="reset" value="  Clear All  " class="button-wattantyregrop" onclick="reset_lookup();" /></td>
  </tr>
</table>
<script type="text/javascript">
//<![CDATA[
    var warranty_prod_reg_Form = new VarienForm('warranty_prod_reg_Form', true);
//]]>
</script>
<script type="text/javascript">
var $jq = jQuery.noConflict();
$jq(document).ready(function() {
    // assuming the controls you want to attach the plugin to have the "datepicker" class set
    $jq('#purchasedon').Zebra_DatePicker();
    $jq('#installedon').Zebra_DatePicker();
 });
 
$jq('#apt').blur(function(){
	if($jq('#apt').val()!='')
	{
		$jq('#aptcom').attr('checked','checked');
		$jq('#aptres').attr('disabled','true');
	}
	else
	{
		$jq('#aptres').removeAttr('disabled','true');
		$jq('#aptres').attr('checked','checked');
		
	}
});
var sprytextfield1 = new Spry.Widget.ValidationTextField("sprytextfield1","zip_code", {validateOn:["blur"]});
var sprytextfield2 = new Spry.Widget.ValidationTextField("sprytextfield2","phone_number", {validateOn:["blur"],useCharacterMasking:true});
var sprytextfield3 = new Spry.Widget.ValidationTextField("sprytextfield3","none", {validateOn:["blur"]});
var sprytextfield4 = new Spry.Widget.ValidationTextField("sprytextfield4","phone_number", {validateOn:["blur"],useCharacterMasking:true});
var sprytextfield5 = new Spry.Widget.ValidationTextField("sprytextfield5","phone_number",{isRequired:false,useCharacterMasking:true});
var sprytextfield6 = new Spry.Widget.ValidationTextField("sprytextfield6","zip_code",{isRequired:false});
var sprytextfield7 = new Spry.Widget.ValidationTextField("sprytextfield7","integer",{validateOn:["blur"]});
</script>